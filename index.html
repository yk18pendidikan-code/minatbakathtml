<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Tes Minat Bakat RIASEC Neutron Murangan</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
:root{
  --bg:#f4f6fb;
  --card:#fff;
  --text:#222;
}

*{box-sizing:border-box}

body{
  font-family:Segoe UI,Arial,sans-serif;
  background:var(--bg);
  margin:0;
  color:var(--text);
}

.container{
  max-width:900px;
  margin:auto;
  padding:20px;
}

.card{
  background:var(--card);
  border-radius:14px;
  padding:20px;
  margin-bottom:18px;
  box-shadow:0 4px 12px rgba(0,0,0,.06);
  page-break-inside:avoid;
}

.center{text-align:center}

.logo-wrap{text-align:center;margin-bottom:12px}
.logo-wrap img{max-width:140px}

input[type=text]{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid #ccc;
  margin:8px 0 16px;
  font-size:15px;
}

button{
  background:#2b4eff;
  color:#fff;
  border:none;
  padding:12px;
  border-radius:10px;
  cursor:pointer;
  width:100%;
  font-size:15px;
}

.print-btn{background:#00a86b}

.section-title{
  font-weight:700;
  font-size:18px;
  margin-bottom:10px;
}

.question{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  margin:12px 0;
}

.scale{display:flex;gap:10px}

.scale input{
  appearance:none;
  width:22px;
  height:22px;
  border-radius:50%;
  border:2px solid #aaa;
  cursor:pointer;
}

.scale input[value="1"]{border-color:#ff4d4d}
.scale input[value="2"]{border-color:#ff944d}
.scale input[value="3"]{border-color:#999}
.scale input[value="4"]{border-color:#4da6ff}
.scale input[value="5"]{border-color:#2b4eff}

.scale input:checked{background:currentColor}
.scale input[value="1"]:checked{color:#ff4d4d}
.scale input[value="2"]:checked{color:#ff944d}
.scale input[value="3"]:checked{color:#999}
.scale input[value="4"]:checked{color:#4da6ff}
.scale input[value="5"]:checked{color:#2b4eff}

/* ===== HASIL & PDF ===== */
.hasil-wrapper{
  display:flex;
  flex-direction:column;
  align-items:center;
}

#pdfArea{
  width:210mm;
  min-height:297mm;
  padding:10mm;
  background:#fff;
}

canvas{
  max-width:180mm;
  margin:20px auto;
  display:block;
}

.btn-row{
  display:flex;
  gap:12px;
  justify-content:center;
  margin-top:20px;
}

.hasil-btn{width:210mm}

@media(max-width:700px){
  .question{flex-direction:column;align-items:flex-start}
  .hasil-btn{width:100%}
}
</style>
</head>

<body>

<!-- ===== HALAMAN AKSES ===== -->
<div class="container" id="halamanAkses">
  <div class="card center">
    <div class="logo-wrap"><img src="logo2.png"></div>
    <h2>Akses Tes RIASEC</h2>

    <input type="text" id="namaInput" placeholder="Nama Peserta">
    <input type="text" id="kodeInput" placeholder="Kode Akses">

    <button onclick="cekAkses()">Masuk Tes</button>
  </div>
</div>

<!-- ===== HALAMAN TES ===== -->
<div class="container" id="halamanTes" style="display:none">
  <div class="logo-wrap"><img src="logo2.png"></div>
  <h1 class="center">Tes Minat & Bakat RIASEC Neutron Murangan</h1>
  <p class="center"><b>Nama:</b> <span id="namaView"></span></p>

  <div id="quiz"></div>

  <div class="card center">
    <button onclick="hitung()">Lihat Hasil</button>
  </div>
</div>

<!-- ===== HALAMAN HASIL ===== -->
<div class="container" id="halamanHasil" style="display:none"></div>

<script>
let namaPeserta="Peserta";
const kodeBenar="neutronmurangan";

/* ===== CEK AKSES ===== */
function cekAkses(){
  const nama=namaInput.value.trim();
  const kode=kodeInput.value.trim();

  if(nama===""){
    alert("Nama harus diisi");
    return;
  }
  if(kode!==kodeBenar){
    alert("Kode akses salah!");
    return;
  }

  namaPeserta=nama;
  namaView.innerText=namaPeserta;

  halamanAkses.style.display="none";
  halamanTes.style.display="block";
}

/* ===== DATA ===== */
const questions = {
  R:["Saya senang bekerja menggunakan alat, mesin, atau peralatan teknis","Saya lebih suka pekerjaan yang melibatkan aktivitas fisik","Saya tertarik memperbaiki atau merakit benda","Saya menikmati pekerjaan lapangan","Saya puas melihat hasil kerja nyata","Saya lebih suka praktik langsung","Saya tertarik pada pekerjaan teknik","Saya nyaman bekerja dengan benda"],
  I:["Saya suka memecahkan masalah","Saya tertarik penelitian","Saya menikmati analisis data","Saya suka mencari tahu sebab akibat","Saya berpikir logis","Saya tertarik sains","Saya senang belajar ilmiah","Saya suka bekerja mandiri"],
  A:["Saya senang seni dan desain","Saya kreatif","Saya tidak suka aturan kaku","Saya suka kebebasan berekspresi","Saya tertarik musik/film","Saya suka hal unik","Saya nyaman tanpa pola baku","Saya lebih suka ide daripada angka"],
  S:["Saya senang membantu orang","Saya nyaman berkomunikasi","Saya tertarik mengajar","Saya empatik","Saya suka kerja tim","Saya puas memberi manfaat","Saya tertarik kegiatan sosial","Saya pendengar yang baik"],
  E:["Saya percaya diri","Saya suka memimpin","Saya tertarik bisnis","Saya suka target","Saya senang mempengaruhi orang","Saya berani mengambil keputusan","Saya aktif organisasi","Saya suka tantangan"],
  C:["Saya rapi dan teratur","Saya teliti","Saya patuh aturan","Saya suka data","Saya menikmati administrasi","Saya terencana","Saya tidak keberatan tugas berulang","Saya suka pekerjaan terstruktur"]
};

const detail={
  R:{nama:"Realistic",desc:"Praktis dan teknis",jur:["Teknik Mesin","Teknik Sipil","Teknik Elektro","Agribisnis"]},
  I:{nama:"Investigative",desc:"Analitis dan ilmiah",jur:["Kedokteran","Farmasi","Informatika","Statistika"]},
  A:{nama:"Artistic",desc:"Kreatif dan ekspresif",jur:["DKV","Seni Musik","Film","Animasi"]},
  S:{nama:"Social",desc:"Komunikatif dan empatik",jur:["Psikologi","Pendidikan","Keperawatan","BK"]},
  E:{nama:"Enterprising",desc:"Kepemimpinan dan bisnis",jur:["Manajemen","Akuntansi","Hukum","Kewirausahaan"]},
  C:{nama:"Conventional",desc:"Terstruktur dan teliti",jur:["Akuntansi","Administrasi","Perbankan","Manajemen"]}
};

/* ===== RENDER ===== */
const quiz=document.getElementById("quiz");
for(let k in questions){
  let card=document.createElement("div");
  card.className="card";
  card.innerHTML=`<div class="section-title">${k} - ${detail[k].nama}</div>`;
  questions[k].forEach((q,i)=>{
    card.innerHTML+=`
    <div class="question">
      <span>${q}</span>
      <div class="scale">
        ${[1,2,3,4,5].map(v=>`
          <input type="radio" name="${k}_${i}" value="${v}" ${v==3?"checked":""}>
        `).join("")}
      </div>
    </div>`;
  });
  quiz.appendChild(card);
}

/* ===== HITUNG ===== */
function hitung(){
  let skor={};
  for(let k in questions){
    skor[k]=0;
    questions[k].forEach((_,i)=>{
      skor[k]+=+document.querySelector(`input[name="${k}_${i}"]:checked`).value;
    });
  }

  let urut=Object.entries(skor).sort((a,b)=>b[1]-a[1]);

  halamanTes.style.display="none";
  halamanHasil.style.display="block";

  halamanHasil.innerHTML=`
  <div class="hasil-wrapper">
    <div id="pdfArea">
      <div class="logo-wrap"><img src="logo2.png"></div>
      <h1 class="center">Hasil Tes RIASEC Neutron Murangan</h1>
      <p class="center"><b>Nama:</b> ${namaPeserta}</p>

      <canvas id="chart"></canvas>

      ${urut.slice(0,3).map(u=>`
      <div class="card">
        <h3>${u[0]} - ${detail[u[0]].nama}</h3>
        <p>${detail[u[0]].desc}</p>
        <b>Rekomendasi Jurusan:</b>
        <ul>${detail[u[0]].jur.map(j=>`<li>${j}</li>`).join("")}</ul>
      </div>`).join("")}
    </div>

    <div class="btn-row hasil-btn">
      <button class="print-btn" onclick="window.print()">ðŸ–¨ Cetak</button>
      <button onclick="downloadPDF()">ðŸ“„ Download PDF</button>
    </div>
  </div>`;

  new Chart(chart,{
    type:"radar",
    data:{
      labels:Object.keys(skor),
      datasets:[{
        data:Object.values(skor),
        backgroundColor:"rgba(43,78,255,.2)",
        borderColor:"#2b4eff"
      }]
    },
    options:{scales:{r:{beginAtZero:true}}}
  });
}

/* ===== PDF ===== */
function downloadPDF(){
  html2pdf().set({
    filename:"Hasil_RIASEC_"+namaPeserta+".pdf",
    jsPDF:{unit:'mm',format:'a4'}
  }).from(document.getElementById("pdfArea")).save();
}
</script>

</body>
</html>
